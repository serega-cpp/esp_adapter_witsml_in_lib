<?xml version="1.0" encoding="utf-8"?>
<WitsmlRule>

  <!-- COMMENT: Witsml description XML (Witsml Rules)

  ------------------------------------------------------------------------------------------------------------
  Witsml file is treated as a set of columns (with attributes) plus 
  rows with data values for each column for specific time. Column
  attributes (meta data) consist of static and variable part. 
  Static part is const for all columns (e.g. wellbore name), 
  variable part is specific for each column (e.g. column name, measurement units).
  
  ------------------------------------------------------------------------------------------------------------
  Original Witsml file (simplifyed):
  
  <Wellbore>
    <CommonName>SuperWellbore</CommonName>
  </Wellbore>
  <ColumnsNode>
    <name>column1</name>
    <column_attr1>Time</column_attr1>
    <column_attr2>unitless</column_attr2>
    <column_attr3>2006-08-02 22:46:45.000</column_attr3>
  </ColumnsNode>
  <ColumnsNode>
    <name>column2</name>
    <column_attr1>Distance</column_attr1>
    <column_attr2>meters</column_attr2>
    <column_attr3>2006-08-02 22:46:45.000</column_attr3>
  </ColumnsNode>
  <ColumnsNode>
    <name>columnN</name>
    <column_attr1>Weight</column_attr1>
    <column_attr2>kg</column_attr2>
    <column_attr3>2006-08-02 22:46:45.000</column_attr3>
  </ColumnsNode>
  <DataNode>
    <data>2006-08-02 22:46:45.000,0.11,0.21,0.31</data>
    <data>2006-08-02 22:47:45.000,0.12,0.22,0.32</data>
    <data>2006-08-02 22:48:45.000,0.13,0.23,0.33</data>
    <data>2006-08-02 22:49:45.000,0.14,0.24,0.34</data>
    <data>2006-08-02 22:50:45.000,0.15,0.25,0.35</data>
  </DataNode>

  ------------------------------------------------------------------------------------------------------------
  Corresponding table structure (approx):
  ______________________________________________
            | column1 | column2 | ... | columnN |
  00:01:00  | 0.11    | 0.21    | ... | 10.9    |
  00:01:05  | 0.12    | 0.22    | ... | 10.8    |
  00:01:10  | 0.13    | 0.23    | ... | 10.7    |
  ______________________________________________|
  
  ------------------------------------------------------------------------------------------------------------
  Table above is transffered to ESP Adapter as a set of CSV rows 
  (all rows have the same columns count):
  
  RowType_column;RowKey;column1;CommonName;column_attr1;column_attr2;column_attr3;column_attr3;
  RowType_column;RowKey;column2;CommonName;column_attr1;column_attr2;column_attr3;column_attr3;
  RowType_column;RowKey;columnN;CommonName;column_attr1;column_attr2;column_attr3;column_attr3;
  RowType_value;RowKey;column1_key;00:01:00;0.11;;;;
  RowType_value;RowKey;column2_key;00:01:00;0.21;;;;
  RowType_value;RowKey;columnN_key;00:01:00;10.9;;;;
  RowType_value;RowKey;column1_key;00:01:00;0.11;;;;
  RowType_value;RowKey;column2_key;00:01:00;0.21;;;;
  RowType_value;RowKey;columnN_key;00:01:00;10.9;;;;
  RowType_value;RowKey;column1_key;00:01:00;0.11;;;;
  RowType_value;RowKey;column2_key;00:01:00;0.21;;;;
  RowType_value;RowKey;columnN_key;00:01:00;10.9;;;;
  
  Note: RowKey - is autogenerated unique id for row; it's required by ESP for Input Window object
        to have unique Primary Key for each row.
        
  ------------------------------------------------------------------------------------------------------------
  So, we have the following Rules format for Witsml file:
  
  <WitsmlRule>          - the root
  <ColumnsMeta>         - describes attributes for all columns (meta data);
    attr: tableId       - numeric identificator, identifies the row with column attributes, this id 
                          is used by ESP Project to distingnish rows with columns meta data and rows 
                          with data values  (in sample above 'RowType_column');
    <StaticAttrs>       - static part of column attributes;
      attr: key         - set of attributes which are part of primary key for static part 
                          of column attributes (attributes positions, started with 1),
                          (key attributes will be attached to each data row);
    <VariableAttrs>     - variable part of column attributes *);
      attr: key         - set of attributes which are part of primary key for variable part 
                          of column attributes (attributes positions, started with 1),
                          (key attributes will be attached to each data row);
      attr: collection  - the name of Witsml node which contains attributes inside (in sample above '<ColumnsNode>')
    <PlainText>         - the attribute of plain text type, can have the following values:
                          format: "parent_node:node" (e.g. "log:NameWell")
                          format: "node" (use 'collection' attr as parent_node)
    <Hash>              - the calculated attribute, which is hash of reffered 'PlainText' attributes -
                          format: "1,2,3,5" - positions of attributes (started with 1) to hash up
    <Time>              - the calculated attribute, processes DateTime by removing trailing timezone (e.g. "+02:00") -
                          format: "parent_node:node" (e.g. "commonData:dTimStamp")
                          format: "node" (use 'collection' attr as parent_node)
    <TimeZone>          - the calculated attribute, processes DateTime by extracting trailing timezone (e.g. "+02:00") -
                          format: "parent_node:node" (e.g. "commonData:dTimStamp")
                          format: "node" (use 'collection' attr as parent_node)
  <ColumnsData>         - desribes data in columns;
    attr: tableId       - numeric identificator, identifies the row with data values, this id 
                          is used by ESP Project to distingnish rows with columns meta data and rows 
                          with data values  (in sample above 'RowType_value');
    attr: collection    - the name of Witsml node which contains data inside (in sample above '<DataNode>')
    <CsvText>           - the attribute with data values in form of csv strings (in sample above '<data>') *);
  
  Important note:
  *) - assumed that 1-st column in <VariableAttrs> and in <DataValues> is DateTime; this column is hidden from ESP project
  
  ------------------------------------------------------------------------------------------------------------
  The csv rows are sent to ESP have the following columns order (all csv rows have the same number of columns):
  
  1. ColumnsMeta information
     TableId;AutogeneratedUniqueKey;Static attributes;Variable attributes;
  2. DataValues
     TableId;AutogeneratedUniqueKey;Static part of primary key;Variable part of primary key;DateTime;Value;;;;;;;  

  ------------------------------------------------------------------------------------------------------------   
-->

  <ColumnsMeta tableId="1001">
    <StaticAttrs key="5">
      <PlainText>log:NameWell</PlainText>
      <PlainText>log:NameWellbore</PlainText>
      <PlainText>logHeader:UomNamingSystem</PlainText>
      <PlainText>commonData:NameSource</PlainText>
      <Hash>1,2,3,4</Hash>
    </StaticAttrs>
    <VariableAttrs collection="logCurveInfo" key="8,4">
      <PlainText>columnIndex</PlainText>
      <Time>startIndex</Time>
      <Time>endIndex</Time>
      <TimeZone>startIndex</TimeZone>
      <PlainText>mnemAlias</PlainText>
      <PlainText>curveDescription</PlainText>
      <PlainText>mnemonic</PlainText>
      <Hash>7</Hash>
    </VariableAttrs>
  </ColumnsMeta>
  
  <ColumnsData tableId="1002" collection="logData">
    <CsvText>data</CsvText>
  </ColumnsData>

</WitsmlRule>
